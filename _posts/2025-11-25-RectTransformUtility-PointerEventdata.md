---
layout: post
title: "유니티 초보자 가이드: RectTransformUtility와 PointerEventData 파헤치기"
date: 2025-11-25 00:41:00 +0900
categories: 
tags:  ["C#", "Unity"]
---

## 유니티 초보자 가이드: RectTransformUtility와 PointerEventData 파헤치기!

안녕하세요, 유니티 개발을 시작하는 여러분! 🙋‍♂️

유니티에서 멋진 UI(사용자 인터페이스)를 만들고, 마우스나 터치 같은 사용자 입력을 정교하게 처리하려면 반드시 알아야 할 두 가지 중요한 개념이 있습니다. 바로 **`RectTransformUtility`**와 **`PointerEventData`**입니다.

이름만 들으면 복잡해 보일 수 있지만, 이 둘만 잘 이해하면 여러분의 UI 개발 능력이 한 단계 업그레이드될 거예요!

---

### 1. 📐 RectTransformUtility: 좌표 변환의 마법사

유니티에서 이미지, 버튼 같은 모든 UI 요소는 **RectTransform**이라는 컴포넌트를 가지고 있습니다. 이 RectTransform은 UI 요소의 크기, 위치, 회전 등을 결정하죠.

하지만 문제는 유니티 안에 **여러 가지 좌표계**가 존재한다는 것입니다.

* **스크린 좌표:** 모니터 화면 전체를 기준으로 한 좌표 (ex: 마우스 위치).
* **로컬 좌표:** 해당 UI 요소 자신을 기준으로 한 좌표 (ex: 버튼의 왼쪽 상단은 (0,0)).

이 서로 다른 좌표계를 왔다 갔다 변환할 때 사용하는 도구가 바로 **`RectTransformUtility`**입니다!

#### 핵심 함수: `ScreenPointToLocalPointInRectangle`

이 함수는 아마 가장 많이 쓰일 거예요.

> ** 역할:** 스크린 위의 한 지점(예: 마우스 커서)이 특정 UI 요소(RectTransform)의 **어느 로컬 위치**에 해당하는지 정확히 알려줍니다.

** 실생활 예시:**
여러분이 **드래그 가능한 패널**을 만든다고 가정해 봅시다.

1.  마우스가 패널 위를 움직일 때 (`Input.mousePosition` = 스크린 좌표)
2.  패널이 움직여야 할 양을 계산하려면, 이 스크린 좌표를 **패널 내부의 좌표**로 변환해야 합니다.
3.  이때 `ScreenPointToLocalPointInRectangle`을 사용하면, 마우스가 패널의 로컬 좌표계에서 정확히 어디에 있는지 알 수 있어 부드러운 드래그 구현이 가능해집니다!

---

### 2. 🖱️ PointerEventData: 포인터 입력의 '상세 기록부'

유니티의 이벤트 시스템에서 마우스 클릭, 터치, 드래그 같은 **포인터 입력**이 발생할 때, 해당 입력에 대한 **모든 정보**를 담아 전달해 주는 데이터 묶음이 바로 **`PointerEventData`**입니다.

이 클래스는 여러분이 UI 이벤트 핸들러(Handler)를 구현할 때 함수의 매개변수로 항상 전달됩니다.

#### 핵심 속성 (자주 사용하는 정보들)

| 속성 | 역할 | 사용 예시 |
| :--- | :--- | :--- |
| **`position`** | 이벤트가 발생한 **현재 스크린 좌표** | 마우스가 어디를 클릭했는지 확인 |
| **`delta`** | 마지막 프레임 이후 포인터의 **이동 거리** | 드래그 중 오브젝트를 이동시킬 때 |
| **`button`** | 눌린 마우스 버튼 (Left, Right, Middle) | 우클릭 시 특정 메뉴를 띄울 때 |
| **`clickCount`** | 클릭 횟수 (1: 싱글 클릭, 2: 더블 클릭) | 더블 클릭에 대한 특정 기능 구현 |
| **`dragging`** | 현재 드래그 중인지 여부 (True/False) | 드래그 중인 상태를 UI로 표시할 때 |

** 실생활 예시:**

여러분은 **더블 클릭**으로 UI를 확대하는 기능을 만들고 싶습니다.

1.  `IPointerClickHandler` 인터페이스를 사용합니다.
2.  이벤트가 발생하면 `PointerEventData eventData`를 받습니다.
3.  `if (eventData.clickCount == 2)` 를 사용하여 더블 클릭인지 확인하고 확대 기능을 실행합니다.

이렇게 `PointerEventData`는 단순한 '클릭'이라는 사실을 넘어, **'왼쪽 버튼으로, 두 번 클릭했고, 현재 스크린의 (X, Y) 위치에서 발생했다'**는 모든 상세 정보를 제공하여 개발자가 원하는 복잡한 입력을 처리할 수 있게 돕습니다.

---

### 요약 정리

| 개념 | 역할 | 핵심 사용처 |
| :--- | :--- | :--- |
| **`RectTransformUtility`** | 서로 다른 좌표계를 변환하는 **도구 상자** | 마우스 위치를 UI 요소의 로컬 위치로 변환할 때 |
| **`PointerEventData`** | 포인터 입력에 대한 **상세 정보 기록부** | 클릭 횟수, 드래그 상태, 눌린 버튼 등을 확인할 때 |

이 두 가지 개념은 유니티 UI 개발의 기본 중의 기본이니, 꼭 숙지하고 멋진 인터랙티브 경험을 만들어보세요! 궁금한 점이 있다면 언제든지 질문해주세요! 😊
