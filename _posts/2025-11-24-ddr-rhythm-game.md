---
layout: post
title: "μ£Όλ¨Ήκµ¬κµ¬μ‹μ€ κ·Έλ§! μ λ€λ΅ λ κµ¬μ΅°λ΅ DDR λ¦¬λ“¬κ²μ„ λ§λ“¤κΈ° (1νΈ: λΌμΈ μ‹μ¤ν…κ³Ό νμ •)"
date: 2025-11-24 19:43:00 +0900
categories: 
tags:  ["C#", "Unity"]
---

# [Unity/C\#] μ£Όλ¨Ήκµ¬κµ¬μ‹μ€ κ·Έλ§\! μ λ€λ΅ λ κµ¬μ΅°λ΅ DDR λ¦¬λ“¬κ²μ„ λ§λ“¤κΈ° (1νΈ: λΌμΈ μ‹μ¤ν…κ³Ό νμ •)

μ•λ…•ν•μ„Έμ”. μ¤λμ€ μ λ‹ν‹°λ΅ λ¦¬λ“¬ κ²μ„μ„ λ§λ“¤ λ• κ°€μ¥ μ¤‘μ”ν• \*\*'κµ¬μ΅° μ„¤κ³„'\*\*λ¶€ν„° λ‹¤λ£¨μ–΄λ³΄κ² μµλ‹λ‹¤.

μΈν„°λ„·μ— ν”ν• μμ λ“¤μ²λΌ μ¶©λμ²΄(`Collider`)λ¥Ό μ“°κ±°λ‚ `GameObject.Find`λ΅ λ…ΈνΈλ¥Ό μ°Ύλ” λ°©μ‹μ€ μ‰½μ§€λ§, λ…ΈνΈκ°€ λ§μ•„μ§€λ©΄ λ ‰μ΄ κ±Έλ¦¬κ³  μ •ν™•ν• νμ •μ„ κµ¬ν„ν•κΈ° μ–΄λ µμµλ‹λ‹¤. μ°λ¦¬λ” \*\*μλ£κµ¬μ΅°(Queue)\*\*λ¥Ό ν™μ©ν•΄ **'λΌμΈ(Line)' λ³„λ΅ λ…ΈνΈλ¥Ό κ΄€λ¦¬ν•λ” μ •μ„μ μΈ λ°©λ²•**μΌλ΅ κµ¬ν„ν•΄ λ³΄κ² μµλ‹λ‹¤.

-----

## π—οΈ ν•µμ‹¬ μ•„ν‚¤ν…μ²: Lane System

μ°λ¦¬λ” κ²μ„μ„ 4κ°μ λΌμΈ(D, F, J, K ν‚¤ λ“±)μΌλ΅ κµ¬μ„±ν•λ‹¤κ³  κ°€μ •ν•©λ‹λ‹¤. ν•µμ‹¬μ€ κ° λΌμΈμ΄ **μμ‹ μ λ…ΈνΈ λ©λ΅μ„ μ§μ ‘ κ΄€λ¦¬**ν•κ² ν•λ” κ²ƒμ…λ‹λ‹¤.

  * **Note:** μ¤μ¤λ΅ μ΄λ™ν•λ©°, μμ‹ μ μ„μΉ μ •λ³΄λ¥Ό κ°€μ§‘λ‹λ‹¤.
  * **LaneManager:** νΉμ • λΌμΈ(μ: μ²« λ²μ§Έ μ¤„)μ λ…ΈνΈλ“¤μ„ `Queue(λ€κΈ°μ—΄)`μ— λ‹΄μ•„ κ΄€λ¦¬ν•κ³ , ν‚¤ μ…λ ¥μ΄ λ“¤μ–΄μ¤λ©΄ **κ°€μ¥ λ¨Όμ € μƒμ„±λ λ…ΈνΈ**μ™€μ κ±°λ¦¬λ§ κ³„μ‚°ν•©λ‹λ‹¤.

-----

## 1\. λ…ΈνΈ μ¤ν¬λ¦½νΈ (`Note.cs`)

λ…ΈνΈλ” λ‹¨μν•΄μ•Ό ν•©λ‹λ‹¤. μ›€μ§μ΄κ³ , ν•„μ” μ—†μΌλ©΄ μ‚¬λΌμ§€λ” κΈ°λ¥λ§ λ‹΄λ‹Ήν•©λ‹λ‹¤.

```csharp
using UnityEngine;

public class Note : MonoBehaviour
{
    // λ…ΈνΈμ μ†λ„λ” μ™Έλ¶€(Manager)μ—μ„ ν†µμ ν•λ” κ²ƒμ΄ ν™•μ¥μ„±μ— μΆ‹μµλ‹λ‹¤.
    private float noteSpeed; 

    public void Initialize(float speed)
    {
        this.noteSpeed = speed;
    }

    void Update()
    {
        // λ‹¨μ μ΄λ™: μ„ -> μ•„λ
        transform.Translate(Vector2.down * noteSpeed * Time.deltaTime);
    }
    
    // ν™”λ©΄ λ°–μΌλ΅ λ‚κ°”μ„ λ• νΈμ¶λ  ν•¨μ (μ—¬κΈ°μ„λ” κ°„λ‹¨ν μ²λ¦¬)
    public void HideNote()
    {
        // λ‚μ¤‘μ— μ¤λΈμ νΈ ν’€λ§(Object Pooling)μ„ μ μ©ν•κΈ° μ„ν•΄ Destroy λ€μ‹  λΉ„ν™μ„±ν™” μ¶”μ²
        gameObject.SetActive(false); 
    }
}
```

-----

## 2\. λΌμΈ λ§¤λ‹μ € (`LaneManager.cs`) - **ν•µμ‹¬\!**

μ΄ μ¤ν¬λ¦½νΈλ” ν•λ‚μ 'λΌμΈ'μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤. 4ν‚¤ κ²μ„μ΄λΌλ©΄ μ΄ μ¤ν¬λ¦½νΈκ°€ λ¶™μ€ μ¤λΈμ νΈκ°€ 4κ° μμ–΄μ•Ό ν•©λ‹λ‹¤.
`Queue`λ¥Ό μ‚¬μ©ν•λ©΄ λ§¤λ² λ¨λ“  λ…ΈνΈλ¥Ό κ²€μ‚¬ν•  ν•„μ” μ—†μ΄ \*\*'νμ • λ€μƒμ΄ λλ” λ§¨ μ•μ λ…ΈνΈ'\*\*λ§ μ™ κΊΌλ‚΄μ„ κ²€μ‚¬ν•  μ μμµλ‹λ‹¤.

```csharp
using System.Collections.Generic;
using UnityEngine;

public class LaneManager : MonoBehaviour
{
    [Header("Settings")]
    public KeyCode inputKey;       // μ΄ λΌμΈμ μ…λ ¥ ν‚¤ (μ: D)
    public GameObject notePrefab;  // μƒμ„±ν•  λ…ΈνΈ ν”„λ¦¬νΉ
    public Transform spawnPoint;   // λ…ΈνΈ μƒμ„± μ„μΉ
    public Transform hitPoint;     // νμ •μ„  μ„μΉ (Target)
    
    [Header("Difficulty")]
    public float noteSpeed = 5f;
    
    // ν„μ¬ ν™”λ©΄μ— λ‚μ™€μλ” μ΄ λΌμΈμ λ…ΈνΈλ“¤μ„ μμ„λ€λ΅ κ΄€λ¦¬ν•λ” ν
    private Queue<Note> noteQueue = new Queue<Note>();

    void Update()
    {
        // 1. μ…λ ¥ μ²λ¦¬
        if (Input.GetKeyDown(inputKey))
        {
            HandleInput();
        }
        
        // (ν…μ¤νΈμ©) μΌμ • μ‹κ°„λ§λ‹¤ λ…ΈνΈ μƒμ„± λ΅μ§μ€ λ³„λ„ GameManagerμ—μ„ ν•λ” κ² μΆ‹μ§€λ§,
        // μ—¬κΈ°μ„λ” νΈμμƒ ν…μ¤νΈ μ½”λ“λ΅ λ„£μµλ‹λ‹¤.
        if(Random.Range(0, 100) < 2) SpawnNote(); 
    }

    public void SpawnNote()
    {
        // μ‹¤μ  μƒμ„± (λ‚μ¤‘μ—” Object Poolμ—μ„ κΊΌλ‚΄μ¤λ” λ°©μ‹μΌλ΅ λ³€κ²½ κ¶μ¥)
        GameObject g = Instantiate(notePrefab, spawnPoint.position, Quaternion.identity);
        Note newNote = g.GetComponent<Note>();
        
        newNote.Initialize(noteSpeed); // μ†λ„ μ£Όμ…
        noteQueue.Enqueue(newNote);    // λ€κΈ°μ—΄(ν)μ— λ“±λ΅! μ΄κ² ν•µμ‹¬μ…λ‹λ‹¤.
    }

    private void HandleInput()
    {
        // νκ°€ λΉ„μ–΄μλ‹¤λ©΄ νμ •ν•  λ…ΈνΈκ°€ μ—†λ‹¤λ” λ»
        if (noteQueue.Count == 0) return;

        // κ°€μ¥ μ¤λλ(λ§¨ μ•„λμ— μλ”) λ…ΈνΈ ν™•μΈ (Peekμ€ κΊΌλ‚΄μ§€ μ•κ³  λ³΄κΈ°λ§ ν•¨)
        Note targetNote = noteQueue.Peek();
        
        // νμ •μ„ κ³Ό λ…ΈνΈ μ‚¬μ΄μ κ±°λ¦¬ μ λ“κ°’ κ³„μ‚° (μ¤μ°¨)
        float distance = Mathf.Abs(targetNote.transform.position.y - hitPoint.position.y);

        // νμ • λ²”μ„ μ„¤μ • (λ‹¨μ„: μ λ‹ν‹° μΆν‘)
        // 0.1fλ” μ•„μ£Ό μ •ν™•ν•¨(Perfect), 0.5fλ” λ³΄ν†µ(Good), κ·Έ μ΄μƒμ€ Miss
        if (distance < 0.5f) 
        {
            Debug.Log($"Hit! ({inputKey}) - μ¤μ°¨: {distance:F4}");
            
            // νμ • μ„±κ³µ μ‹ νμ—μ„ μ™„μ „ν μ κ±°ν•κ³  λ…ΈνΈ μ¤λΈμ νΈ μ²λ¦¬
            Note hitNote = noteQueue.Dequeue(); 
            hitNote.HideNote(); // νΉμ€ μ΄ν™νΈ μ¬μƒ ν›„ λΉ„ν™μ„±ν™”
        }
        else
        {
            // κ±°λ¦¬κ°€ λ„λ¬΄ λ©€λ©΄ ν—›λ„λ¥Έ κ²ƒμΌλ΅ κ°„μ£Ό (Miss μ²λ¦¬ λ“±)
            Debug.Log("Bad Timing...");
        }
    }
    
    // ν™”λ©΄ λ°–μΌλ΅ λ‚κ°„ λ…ΈνΈ μ²λ¦¬ (Update λ“±μ—μ„ μ²΄ν¬ ν•„μ”)
    // μ‹¤μ  κµ¬ν„μ—μ„  Miss μ²λ¦¬λ¥Ό μ„ν•΄ κ±°λ¦¬κ°€ μΌμ • μ΄μƒ λ©€μ–΄μ§€λ©΄ Dequeue ν•΄μ¤μ•Ό ν•¨.
}
```

-----

## 3\. κµ¬μ΅°μ μ¥μ  μ„¤λ… (λΈ”λ΅κ·Έ λ³Έλ¬Έμ©)

μ™ κµ³μ΄ `Queue`λ¥Ό μΌμ„κΉμ”?

1.  **μ„±λ¥ μµμ ν™”:** `GameObject.Find`λ‚ `Tag` κ²€μƒ‰μ€ κ²μ„ λ‚΄μ λ¨λ“  μ¤λΈμ νΈλ¥Ό λ’¤μ§€κΈ° λ•λ¬Έμ— λλ¦½λ‹λ‹¤. `Queue`λ¥Ό μ“°λ©΄ μ°λ¦¬λ” μ–Έμ λ‚ **λ§¨ μ•(Target) λ…ΈνΈ ν•λ‚λ§** μ‹ κ²½ μ“°λ©΄ λ©λ‹λ‹¤. (μ—°μ‚°λ‰ μµμ†ν™”)
2.  **λ²„κ·Έ λ°©μ§€:** μ¶©λ(Collider) λ°©μ‹μ€ κ°€λ” λ…ΈνΈλ¥Ό λ«κ³  μ§€λ‚κ°€κ±°λ‚, λ™μ‹μ— λ‘ κ°κ°€ λλ¦¬λ” λ²„κ·Έκ°€ μƒκΉλ‹λ‹¤. ν λ°©μ‹μ€ λ°μ΄ν„° μμ„κ°€ λ³΄μ¥λλ―€λ΅ μ΄λ° λ²„κ·Έκ°€ μ—†μµλ‹λ‹¤.
3.  **ν™•μ¥μ„±:** λ‚μ¤‘μ— 'λ΅± λ…ΈνΈ'λ‚ 'λ”λΈ” λ…ΈνΈ'λ¥Ό λ§λ“¤ λ•λ„ μ΄ κµ¬μ΅° μ„μ— λ΅μ§λ§ μ–ΉμΌλ©΄ λ©λ‹λ‹¤.

-----

## 4\. μ—λ””ν„° μ„Έν… (λ”°λΌν•κΈ°)

1.  **Lane μ¤λΈμ νΈ λ§λ“¤κΈ°:** λΉ μ¤λΈμ νΈλ¥Ό λ§λ“¤κ³  `LaneManager`λ¥Ό λ¶™μ…λ‹λ‹¤. μ΄κ²ƒμ„ λ³µμ‚¬ν•΄ 4κ°λ¥Ό λ§λ“­λ‹λ‹¤.
2.  **μ„¤μ •:**
      * Lane 1: Key `D`, SpawnPoint `(-1.5, 6, 0)`, HitPoint `(-1.5, -3, 0)`
      * Lane 2: Key `F`, SpawnPoint `(-0.5, 6, 0)`, HitPoint `(-0.5, -3, 0)`
      * ... (λ‚λ¨Έμ§€ λΌμΈλ„ μΆν‘λ§ λ‹¤λ¥΄κ² μ„¤μ •)
3.  **μ‹¤ν–‰:** ν”λ μ΄ν•λ©΄ κ° λΌμΈμ—μ„ λ…ΈνΈκ°€ λ…λ¦½μ μΌλ΅ κ΄€λ¦¬λλ©°, μ •ν™•ν• ν‚¤λ¥Ό λλ €μ„ λ•λ§ νμ •μ΄ μΌμ–΄λ‚©λ‹λ‹¤.

-----

### π€ λ‹¤μ νΈ μκ³ : "μ¤λΈμ νΈ ν’€λ§κ³Ό λ¦¬λ“¬ λ™κΈ°ν™”"

`Instantiate`μ™€ `Destroy`λ” λ©”λ¨λ¦¬λ¥Ό λ§μ΄ λ¨Ήμµλ‹λ‹¤. λ‹¤μ μ‹κ°„μ—λ” μƒμ„±λ λ…ΈνΈλ¥Ό μ¬ν™μ©ν•λ” **μ¤λΈμ νΈ ν’€λ§(Object Pooling)** κΈ°λ²•κ³Ό, μμ•… λ°•μμ— λ”± λ§μ¶° λ…ΈνΈλ¥Ό λ–¨μ–΄λ¨λ¦¬λ” **BPM λ™κΈ°ν™”**μ— λ€ν•΄ μ•μ•„λ³΄κ² μµλ‹λ‹¤.

-----

**λ„μ›€μ΄ λμ…¨λ‚μ”? μ§λ¬Έμ€ λ“κΈ€λ΅ λ‚¨κ²¨μ£Όμ„Έμ”\!**
